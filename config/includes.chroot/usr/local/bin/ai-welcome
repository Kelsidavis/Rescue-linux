#!/bin/bash
# AI Rescue Linux Welcome Script

clear

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m' # No Color

echo -e "${CYAN}"
cat << 'BANNER'
    _    ___   ____                           _     _
   / \  |_ _| |  _ \ ___  ___  ___ _   _  ___| |   (_)_ __  _   ___  __
  / _ \  | |  | |_) / _ \/ __|/ __| | | |/ _ \ |   | | '_ \| | | \ \/ /
 / ___ \ | |  |  _ <  __/\__ \ (__| |_| |  __/ |___| | | | | |_| |>  <
/_/   \_\___| |_| \_\___||___/\___|\__,_|\___|_____|_|_| |_|\__,_/_/\_\

BANNER
echo -e "${NC}"

echo -e "${WHITE}═══════════════════════════════════════════════════════════════════${NC}"
echo -e "${GREEN}  AI-Powered Linux Rescue & Recovery System${NC}"
echo -e "${WHITE}═══════════════════════════════════════════════════════════════════${NC}"
echo ""
echo -e "${YELLOW}Quick Start Commands:${NC}"
echo ""
echo -e "  ${CYAN}ai-repair${NC}      - Launch AI-assisted repair (Claude Code)"
echo -e "  ${CYAN}ai-diagnose${NC}    - Run comprehensive system diagnostics"
echo -e "  ${CYAN}ai-chroot${NC}      - Chroot into a broken Linux installation"
echo -e "  ${CYAN}ai-grub${NC}        - GRUB bootloader repair assistant"
echo -e "  ${CYAN}ai-mount${NC}       - Interactive disk mounting helper"
echo -e "  ${CYAN}ai-fstab${NC}       - fstab repair helper"
echo -e "  ${CYAN}ai-recover${NC}     - Data recovery assistant"
echo -e "  ${CYAN}ai-clone${NC}       - Disk cloning/imaging tools"
echo -e "  ${CYAN}ai-smart${NC}       - Disk health check (SMART)"
echo -e "  ${CYAN}ai-password${NC}    - Password reset (Linux/Windows)"
echo -e "  ${CYAN}ai-network${NC}     - Network diagnostics"
echo ""
echo -e "${YELLOW}AI Tools Available:${NC}"
echo ""
echo -e "  ${PURPLE}claude${NC}         - Claude Code (Anthropic) - Powerful AI assistant"
echo -e "  ${PURPLE}aider${NC}          - AI pair programming tool"
echo -e "  ${PURPLE}llm${NC}            - Multi-provider LLM command-line tool"
echo -e "  ${PURPLE}ollama${NC}         - Local AI (run: /opt/ai-tools/install-ollama.sh)"
echo ""
echo -e "${YELLOW}Recovery Tools:${NC}"
echo ""
echo -e "  ${GREEN}gparted${NC}        - Partition editor (GUI)"
echo -e "  ${GREEN}testdisk${NC}       - Data recovery"
echo -e "  ${GREEN}ddrescue${NC}       - Disk recovery tool"
echo -e "  ${GREEN}boot-repair${NC}    - Automatic boot repair (GUI)"
echo -e "  ${GREEN}fsck${NC}           - Filesystem check"
echo ""
echo -e "${WHITE}═══════════════════════════════════════════════════════════════════${NC}"
echo ""
echo -e "${RED}IMPORTANT:${NC} To use AI tools, you need API keys:"
echo ""
echo -e "  ${CYAN}Claude:${NC}  export ANTHROPIC_API_KEY='your-key'"
echo -e "  ${CYAN}OpenAI:${NC}  export OPENAI_API_KEY='your-key'"
echo -e "  ${CYAN}Gemini:${NC}  export GOOGLE_API_KEY='your-key'"
echo ""
echo -e "Get your API key at: ${BLUE}https://console.anthropic.com/${NC}"
echo ""
echo -e "${WHITE}═══════════════════════════════════════════════════════════════════${NC}"
echo ""

# System overview
echo -e "${YELLOW}System Overview:${NC}"
echo ""

# Memory
mem_total=$(free -h | awk '/^Mem:/ {print $2}')
mem_avail=$(free -h | awk '/^Mem:/ {print $7}')
echo -e "  Memory: ${GREEN}$mem_avail${NC} available of $mem_total"

# Disks detected
disk_count=$(lsblk -d -n -o NAME | grep -E '^(sd|nvme|vd)' | wc -l)
echo -e "  Disks:  ${GREEN}$disk_count${NC} disk(s) detected"

# Network
if ip route | grep -q default; then
    echo -e "  Network: ${GREEN}Connected${NC}"
else
    echo -e "  Network: ${RED}Not connected${NC} - Use nm-connection-editor to configure"
fi

echo ""
echo -e "${WHITE}═══════════════════════════════════════════════════════════════════${NC}"
echo ""
echo -e "Type ${CYAN}ai-repair${NC} to start AI-assisted repair, or ${CYAN}help${NC} for more options."
echo ""
